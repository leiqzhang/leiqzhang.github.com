<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>bfc | Technology &amp; Life</title>
  <meta name="author" content="leiqzhang">
  
  <meta name="description" content="Virtualization Related Technologies">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Technology &amp; Life"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Technology &amp; Life" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Technology &amp; Life</a></h1>
  <h2><a href="/">blog of leiqzhang</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title tag">bfc</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-11-22T16:35:16.000Z"><a href="/2010/11/2010-11-23-css-block-formatting-context/">Nov 23 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/11/2010-11-23-css-block-formatting-context/">CSS的block formatting context</a></h1>
  

    </header>
    <div class="entry">
      
        <p><strong>什么是块格式化内容：Block Formatting Context （BFC）</strong>
网页布局的时候，BFC会在常规流(与之并列的是浮动和绝对定位)中进行布局。BFC提供了一个环境，使得html元素在该环境内按照一定规则进行布局，而不会影响其它环境中的布局</p>
<p><strong>什么情况下生成BFC</strong></p>
<p>当一个元素满足以下条件时，它的包含块将会形成一个BFC：</p>
<ul>
<li>浮动(float属性非none)</li>
</ul>
<ul>
<li>overflow属性的计算值不是visible</li>
</ul>
<ul>
<li>display属性是table-cell、table-caption或着inline-block</li>
</ul>
<ul>
<li>绝对定位(position非static且非relative)</li>
</ul>
<p>需要注意的是，disaply属性为table时并不会建立一个BFC。但是由于display为table时，元素将会生成一个匿名框，这些框会具有display:table-cell属性，故会建立新的BFC。也就是说，建立BFC的是这个display为table-cell的匿名框而非table。所以在display:table和display:table-cell的元素上使用clear属性的效果是不一样的（见最后一小节示例）。
<strong>BFC的影响</strong></p>
<ol>
<li>rule 1. 在bfc内部，垂直相邻的框的margin将会折叠(collapse)</li>
</ol>
<ol>
<li>rule 2. 在同一个bfc内部，所有框的左外边均挨着包含块(bfc)的左侧(rtl时,是右外边挨着包含块的右侧)。即使该bfc中包含float元素也是如此，除非该bfc内部另外一个元素形成了一个新的bfc，这种情况下，该元素的框将会挨着float元素排列，宽度可能会由于float元素的存在而变窄</li>
</ol>
<ol>
<li>rule 3. 一个BFC的border-box不能和与其在同一个BFC的float元素的margin-box相互重叠。这就意味着，浏览器会在BFC上生成不可见的margin来避免它和float元素的margin-box相互重叠。所以，在紧接着float元素的BFC上设置负的margin是没有作用的。而且BFC的margin还是可以和float元素重叠的，不能重叠的只是border-box。</li>
</ol>
<ol>
<li>rule 4.  clear只能清除处于同一个bfc的元素</li>
</ol>
<p><strong>Rule 1 BFC and margin collapse</strong>
从rule 1可知，垂直相邻的框的margin发生collapse的情况只会发生在这两个相邻框在同一个bfc的情形下，而如果两个垂直相邻的框分属于不同的bfc,则不会发生折叠。
如下例:</p>
<p>[html]</p>
<h3>margin collapse in the same BFC:</h3>

 <div style="background-color:skyBlue">
     <p style="margin-bottom:20px;border:1px solid red">
        this is text 1 with style: <br/> {margin-bottom:20px;border:1px solid red}
     </p>
 </div>
 <div style="background-color:skyBlue">
     <p style="margin-top:10px;border:1px solid black">
        this is text 2 with style: <br/> {margin-top:10px;border:1px solid black&quot;}
     </p>
 </div>

 <h3>margin not collapse in different BFCs</h3>
 <div style="background-color:skyBlue">
     <p style="margin-bottom:20px;border:1px solid red">
        this is text 3 with style: <br/> {margin-bottom:20px;border:1px solid red}
     </p>
 </div>
 <div style="background-color:skyBlue;overflow:hidden">
     <p style="margin-top:10px;border:1px solid black">
        this is text 4 with style: <br/> {margin-top:10px;border:1px solid black&quot;} <br/>
        <b>but the containing div has property: &quot;overflow:hidden&quot;, make this div establish a new BFC</b>
     </p>
 </div>
[/html]

效果如下图所示，前两个段落中间的margin发生了collapse，变为了较大的20px，而下面两个段落并未发生collapse，总共是30px
<img src="http://leivli.duapp.com/wp-content/uploads/2010/11/12-1024x286.png" alt="">

因此在需要避免margin collapse时，可以通过构建BFC来实现，这也是为什么浮动的元素和绝对定位的元素不会发生margin collapse的原因了

<strong>Rule 2 float in the BFC</strong>

如果一个无top/bottom border、无top/bottom padding且不形成bfc的div内部包含多个float元素，由于float元素是脱离文档流的，所以即使该div具有margin，也会由于margin相邻而会发生collapse，从而形成一个零高度的div。如果多个这样的div相邻，如果水平空间允许，那么这些div中的float元素将会排列在同一行上，这可能并非预期的效果。如本意要布局一个两行两列div的如下代码片段:

[html]
 <h3>float in zero height divs of the same BFC</h3>

 <div style="margin:20px">
      <div style="float:left;border:1px solid green;background-color:red">float div r1c1</div>
      <div style="float:left;border:1px solid green;background-color:blue">float div r1c2</div>
 </div>

 <div style="margin:20px">
      <div style="float:left;border:1px solid green;background-color:gray">float div r2c1</div>
      <div style="float:left;border:1px solid green;background-color:yellow">float div r2c2</div>
 </div>
[/html]

将生成下列效果的页面,四个浮动框会排列在一行上，而非预期的两行两列布局:

<img src="http://leivli.duapp.com/wp-content/uploads/2010/11/2.png" alt="">

由rule 2可知，在同一个BFC内部，所有框的左外边会挨着左侧排列，即使包含float元素也是如此。因此，如果将上例中的两个div各自均改为BFC，就会达到预期的目的。由于bfc内部两个float元素均会各自生成一个bfc，这两个bfc就会并排排列（如果bfc宽度足够的话，如果不够，由于都是float，第二个float会下移)。而这两个不同BFC又处于初始包含块的BFC中，将会按照常规流进行布局，即第二个BFC排在第一个BFC下面，形成2行2列的样式：


    <span style="text-decoration: line-through;">
    <h3>float in zero height divs of the same BFC</h3>

     <div style="margin:20px">
    <div style="float:left;border:1px solid green;background-color:red">float div r1c1</div>
    <div style="float:left;border:1px solid green;background-color:blue">float div r1c2</div>
     </div>

<pre><code><figure class="highlight"><pre> <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:20px"</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;border:1px solid green;background-color:gray"</span>&gt;</span>float div r2c1<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;border:1px solid green;background-color:yellow"</span>&gt;</span>float div r2c2<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
[html]
<span class="tag">&lt;<span class="title">h3</span>&gt;</span>float in zero height divs of different BFCs<span class="tag">&lt;/<span class="title">h3</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:20px;overflow:hidden"</span>&gt;</span>
      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;border:1px solid green;background-color:red"</span>&gt;</span>float div r1c1<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;border:1px solid green;background-color:blue"</span>&gt;</span>float div r1c2<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:20px;overflow:hidden"</span>&gt;</span>
      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;border:1px solid green;background-color:gray"</span>&gt;</span>float div r2c1<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;border:1px solid green;background-color:yellow"</span>&gt;</span>float div r2c2<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

[/html]



实际布局效果如下图：

<span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://leivli.duapp.com/wp-content/uploads/2010/11/3.png"</span> <span class="attribute">title</span>=<span class="value">"float_in_bfc"</span> <span class="attribute">height</span>=<span class="value">"131"</span> <span class="attribute">width</span>=<span class="value">"519"</span> <span class="attribute">alt</span>=<span class="value">""</span> <span class="attribute">class</span>=<span class="value">"aligncenter size-full wp-image-92"</span>&gt;</span><span class="tag">&lt;/<span class="title">img</span>&gt;</span>

<span class="tag">&lt;<span class="title">strong</span>&gt;</span>Rule 3 BFC  adjoin float<span class="tag">&lt;/<span class="title">strong</span>&gt;</span>

一个普通的div元素(未生成新的BFC)是会被相邻的float元素覆盖的，而一个生成BFC的div元素的border-box是不会被相邻的float元素覆盖的，但是其margin可以被覆盖。如下面的代码：
 [html]

<span class="tag">&lt;<span class="title">h3</span>&gt;</span>float and normal div overlap<span class="tag">&lt;/<span class="title">h3</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray"</span>&gt;</span>float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"background-color:yellow;border:1px solid red"</span>&gt;</span> normal div <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">h3</span>&gt;</span>float and bfc div no overlap<span class="tag">&lt;/<span class="title">h3</span>&gt;</span>
 <span class="tag">&lt;<span class="title">p</span>&gt;</span>both divs have no margin<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray"</span>&gt;</span>float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"background-color:yellow;border:1px solid red;overflow:hidden"</span>&gt;</span> bfc div <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">p</span>&gt;</span>bfc div has margin<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray"</span>&gt;</span>float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"background-color:yellow;border:1px solid red;overflow:hidden;margin-left:10px"</span>&gt;</span> bfc div <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">p</span>&gt;</span>float div has margin<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray;margin-right:10px;margin-right:10px"</span>&gt;</span>float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"background-color:yellow;border:1px solid red;overflow:hidden"</span>&gt;</span> bfc div <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

[/html]



生成的效果如下图：

<span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://leivli.duapp.com/wp-content/uploads/2010/11/4-1024x209.png"</span> <span class="attribute">title</span>=<span class="value">"float_adjoin_bfc"</span> <span class="attribute">height</span>=<span class="value">"209"</span> <span class="attribute">width</span>=<span class="value">"1024"</span> <span class="attribute">alt</span>=<span class="value">""</span> <span class="attribute">class</span>=<span class="value">"aligncenter size-large wp-image-93"</span>&gt;</span><span class="tag">&lt;/<span class="title">img</span>&gt;</span>如图所示，前两个div中，float的div会和另一个div发生重叠，而后面三个示例可以看出，float框不会和相邻的bfc的border box发生重叠。正如rule 3所述，float和bfc的border box不会发生重叠：
当float和bfc都没有margin时，两者紧邻；当bfc有left margin时，该left margin可以被float框覆盖，两者还是紧邻；当float框有right margin时，bfc并不能将其覆盖。

再看另外一个例子，不多说，贴代码:
 [html]

<span class="tag">&lt;<span class="title">h3</span>&gt;</span>float and bfc div no overlap: another example<span class="tag">&lt;/<span class="title">h3</span>&gt;</span>

 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"overflow:hidden"</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:red;width:200px"</span>&gt;</span>first: left float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:right;background-color:green;width:200px"</span>&gt;</span>second: right float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"overflow:hidden;background-color:yellow"</span>&gt;</span>third: bfc div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"overflow:hidden"</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:red;margin-right:20px;width:200px"</span>&gt;</span>first: left float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:right;background-color:green;margin-left:20px;width:200px"</span>&gt;</span>second: right float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"overflow:hidden;background-color:yellow"</span>&gt;</span>third: bfc div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"overflow:hidden"</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:red;width:200px"</span>&gt;</span>first: left float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"float:right;background-color:green;width:200px"</span>&gt;</span>second: right float div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"overflow:hidden;background-color:yellow;margin:0 220px"</span>&gt;</span>third: bfc div<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

[/html]



实际运行效果图：

<span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://leivli.duapp.com/wp-content/uploads/2010/11/5-1024x95.png"</span> <span class="attribute">title</span>=<span class="value">"float_adjoin_bfc_another"</span> <span class="attribute">height</span>=<span class="value">"95"</span> <span class="attribute">width</span>=<span class="value">"1024"</span> <span class="attribute">alt</span>=<span class="value">""</span> <span class="attribute">class</span>=<span class="value">"aligncenter size-large wp-image-94"</span>&gt;</span><span class="tag">&lt;/<span class="title">img</span>&gt;</span>

该例子中有三组，各组均有三个div，分别为float left（width:200px）、float right（width:200px）和无float的third div（一个bfc），每组的包含div具有overflow:hidden，故会形成一个bfc，
即各组的三个div均处于一个独立的BFC中。

第一组中，根据Rule3， third div形成的bfc不会和float div发生重叠，因此在水平空间足够的情况下，三个div会排在一行，中间没有间隙。此时在third div上应用margin并不会在third div的两边和float div
交界处形成空隙。因为这种情况下，如果需要在中间框的左右两侧产生空隙，通过给该框添加margin是无法做到的，但是可以采用以下两个方法做到：

<span class="tag">&lt;<span class="title">ul</span>&gt;</span>

    <span class="tag">&lt;<span class="title">li</span>&gt;</span> 在两边的float上设置margin，如上图第二组所示<span class="tag">&lt;/<span class="title">li</span>&gt;</span>


    <span class="tag">&lt;<span class="title">li</span>&gt;</span> 给third div设置一个大于两边float框宽度的margin，如上图第三组所示<span class="tag">&lt;/<span class="title">li</span>&gt;</span>

<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>


<span class="tag">&lt;<span class="title">strong</span>&gt;</span>Rule 4 BFC and clear<span class="tag">&lt;/<span class="title">strong</span>&gt;</span>
 clear只能清除处于同一个bfc的float元素，这里给出的例子说明了该点，同时也表示了第一段提到的在table元素和table-cell元素上使用clear的不同:
 [html]

<span class="tag">&lt;<span class="title">h3</span>&gt;</span>BFC &amp; clear -- clear on display:talbe vs clear on display:table-cell<span class="tag">&lt;/<span class="title">h3</span>&gt;</span>

 <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"clear:left"</span>&gt;</span>normal div after float div without clear<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:1px solid red"</span>&gt;</span>
<span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray;color:white;border:1px solid green"</span>&gt;</span>
line 1<span class="tag">&lt;<span class="title">br</span>/&gt;</span>
line 2
<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:2px solid yellow"</span>&gt;</span>div content<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"clear:left"</span>&gt;</span>normal div after float div with clear<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:1px solid red"</span>&gt;</span>
<span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray;color:white;border:1px solid green"</span>&gt;</span>
line 1<span class="tag">&lt;<span class="title">br</span>/&gt;</span>
line 2
<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:2px solid yellow;clear:left"</span>&gt;</span>div content<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"clear:left"</span>&gt;</span>display:table after float div without clear<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:1px solid red"</span>&gt;</span>
<span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray;color:white;border:1px solid green"</span>&gt;</span>
line 1<span class="tag">&lt;<span class="title">br</span>/&gt;</span>
line 2
<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"display:table;border:2px solid yellow"</span>&gt;</span><span class="tag">&lt;<span class="title">span</span>&gt;</span>div content<span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"clear:left"</span>&gt;</span>display:table after float div with clear<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:1px solid red"</span>&gt;</span>
<span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray;color:white;border:1px solid green"</span>&gt;</span>
line 1<span class="tag">&lt;<span class="title">br</span>/&gt;</span>
line 2
<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"display:table;clear:left;border:2px solid yellow"</span>&gt;</span>div content<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

 <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"clear:left"</span>&gt;</span>display:table-cell after float div without clear<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:1px solid red"</span>&gt;</span>
<span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray;color:white;border:1px solid green"</span>&gt;</span>
line 1<span class="tag">&lt;<span class="title">br</span>/&gt;</span>
line 2
<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"display:table-cell;border:2px solid yellow"</span>&gt;</span>div content<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

<span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"clear:left"</span>&gt;</span>display:table-cell after float div with clear<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
 <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"border:1px solid red"</span>&gt;</span>
<span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"float:left;background-color:gray;color:white;border:1px solid green"</span>&gt;</span>
line 1<span class="tag">&lt;<span class="title">br</span>/&gt;</span>
line 2
<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"display:table-cell;clear:left;border:2px solid yellow"</span>&gt;</span>div content<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
[/html]



实际运行效果图：
 <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://leivli.duapp.com/wp-content/uploads/2010/11/6-1024x362.png"</span> <span class="attribute">title</span>=<span class="value">"bfc_and_clear"</span> <span class="attribute">height</span>=<span class="value">"362"</span> <span class="attribute">width</span>=<span class="value">"1024"</span> <span class="attribute">alt</span>=<span class="value">""</span> <span class="attribute">class</span>=<span class="value">"aligncenter size-large wp-image-96"</span>&gt;</span><span class="tag">&lt;/<span class="title">img</span>&gt;</span>第一组是一个float div后跟着一个普通的无设置clear属性的div（无display属性）的情况，此时float div会覆盖后面的div，从边框可以看到，后面的div还是从包含div的左侧开始的
 第二组和第一组一样，只是后面的div设置了clear:left属性，这就使得后面的div排列在了float div的下面
 第三组中后面的div设置了display:table,但是没有设置clear属性，与第一组相比，该div的表现更像是一个ＢＦＣ，因为该div没有从包含div的左侧开始，而是从float div的右侧开始布局。
 这就是文章刚开始提到的，display:table本身不会新建一个bfc，但是由于它会使得内部元素生成display:talbe-cell的匿名框，而该匿名框会建立一个bfc
 第四组可以看出第三组中的bfc并不是display:table创建的，因为设置了clear:left后，该div到了float div的下面。
 最后两组是display:table-cell的情况，此时后面的div会建立一个bfc，由于和float的div分属不同的div，clear属性是不起作用的，这也就是为什么第五组设置了clear属性后，表现和第四组一样的原因
</pre></figure></code></pre>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:leiqzhang.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/HTTP/">HTTP</a><small>2</small></li>
  
    <li><a href="/categories/JavaScriptCSS/">JavaScript/CSS</a><small>2</small></li>
  
    <li><a href="/categories/LinuxUnix/">Linux/Unix</a><small>3</small></li>
  
    <li><a href="/categories/MySQL/">MySQL</a><small>2</small></li>
  
    <li><a href="/categories/MySQL/PHP/">PHP</a><small>1</small></li>
  
    <li><a href="/categories/PHP/">PHP</a><small>2</small></li>
  
    <li><a href="/categories/QEMU/">QEMU</a><small>9</small></li>
  
    <li><a href="/categories/QEMU/Virtualization/">Virtualization</a><small>9</small></li>
  
    <li><a href="/categories/WordPress/">WordPress</a><small>2</small></li>
  
    <li><a href="/categories/vim/">vim</a><small>3</small></li>
  
    <li><a href="/categories/virtualization/">virtualization</a><small>1</small></li>
  
    <li><a href="/categories/virtualization/vmware/">vmware</a><small>1</small></li>
  
    <li><a href="/categories/未分类/">未分类</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/bfc/">bfc</a><small>1</small></li>
  
    <li><a href="/tags/cache-control/">cache-control</a><small>1</small></li>
  
    <li><a href="/tags/collapse/">collapse</a><small>1</small></li>
  
    <li><a href="/tags/css/">css</a><small>1</small></li>
  
    <li><a href="/tags/dataplane/">dataplane</a><small>1</small></li>
  
    <li><a href="/tags/ervernote/">ervernote</a><small>1</small></li>
  
    <li><a href="/tags/etag/">etag</a><small>1</small></li>
  
    <li><a href="/tags/expires/">expires</a><small>1</small></li>
  
    <li><a href="/tags/float/">float</a><small>1</small></li>
  
    <li><a href="/tags/greasemonkey/">greasemonkey</a><small>1</small></li>
  
    <li><a href="/tags/hasLayout/">hasLayout</a><small>1</small></li>
  
    <li><a href="/tags/http/">http</a><small>2</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>1</small></li>
  
    <li><a href="/tags/kvm/">kvm</a><small>9</small></li>
  
    <li><a href="/tags/last-modified/">last-modified</a><small>1</small></li>
  
    <li><a href="/tags/libvirt/">libvirt</a><small>8</small></li>
  
    <li><a href="/tags/lighthttpd/">lighthttpd</a><small>1</small></li>
  
    <li><a href="/tags/linux/">linux</a><small>1</small></li>
  
    <li><a href="/tags/mac/">mac</a><small>1</small></li>
  
    <li><a href="/tags/margin/">margin</a><small>1</small></li>
  
    <li><a href="/tags/md5sum/">md5sum</a><small>1</small></li>
  
    <li><a href="/tags/mysql/">mysql</a><small>2</small></li>
  
    <li><a href="/tags/patch/">patch</a><small>1</small></li>
  
    <li><a href="/tags/pdo/">pdo</a><small>1</small></li>
  
    <li><a href="/tags/perf/">perf</a><small>1</small></li>
  
    <li><a href="/tags/permalink/">permalink</a><small>1</small></li>
  
    <li><a href="/tags/php/">php</a><small>2</small></li>
  
    <li><a href="/tags/position/">position</a><small>1</small></li>
  
    <li><a href="/tags/post/">post</a><small>1</small></li>
  
    <li><a href="/tags/proxy/">proxy</a><small>1</small></li>
  
    <li><a href="/tags/qemu/">qemu</a><small>9</small></li>
  
    <li><a href="/tags/rewrite/">rewrite</a><small>1</small></li>
  
    <li><a href="/tags/scsi/">scsi</a><small>1</small></li>
  
    <li><a href="/tags/site-memory/">site memory</a><small>1</small></li>
  
    <li><a href="/tags/soap/">soap</a><small>1</small></li>
  
    <li><a href="/tags/sql/">sql</a><small>1</small></li>
  
    <li><a href="/tags/svn/">svn</a><small>1</small></li>
  
    <li><a href="/tags/tip/">tip</a><small>1</small></li>
  
    <li><a href="/tags/tree_conflict/">tree_conflict</a><small>1</small></li>
  
    <li><a href="/tags/vim/">vim</a><small>3</small></li>
  
    <li><a href="/tags/virtio/">virtio</a><small>1</small></li>
  
    <li><a href="/tags/vmware/">vmware</a><small>1</small></li>
  
    <li><a href="/tags/vpn/">vpn</a><small>1</small></li>
  
    <li><a href="/tags/wget/">wget</a><small>1</small></li>
  
    <li><a href="/tags/wordpress/">wordpress</a><small>2</small></li>
  
  </ul>
</div>


  

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 leiqzhang
  
</div>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'leiqzhang';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>